#!/usr/bin/env python

import argparse
from Bio import AlignIO
import os
from varalign import pfam

# CLI
parser = argparse.ArgumentParser(description='Filter swissprot.')
parser.add_argument('alignment', type=str, help='Alignment file.')
args = parser.parse_args()

alignment = AlignIO.read(args.alignment, format='stockholm')
new_alignment = pfam.filter_non_swissprot(alignment,
                                          swissprot_id_file='/homes/smacgowan/NOBACK/resources/swissprot_ids.tab')
path, filename = os.path.split(args.alignment)
output = os.path.join(path, 'swissprot_'+filename)
AlignIO.write(new_alignment, output, 'stockholm')
